---
title: "Alejandra_hw02_gapminder_dplyr"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#Gapminder exploration and use of dplyr
This is an R Markdown document used for exploring the gapminder dataset through the functions of the dplyr package.
This document is intented to serve as a "cheatsheet" for future work on R.

##Loading data

```{r}
library(gapminder)
library(tidyverse)
library(knitr)
```


## Smell test the data

Is it a data.frame, a matrix, a vector, a list?

```{r}
gapminder
typeof(gapminder)
```
When printing `gapminder` I can see the variables of the data set are arranged in columns and the observations of these variables are arranged in rows. This is a two dimensional object that holds different types of data. 
I know this object is a data frame.

The function `typeof()` determines the (R internal) type or storage mode of an object. The type of this data set is a **list**. A list in R allows to gather a variety of objects under one name in an ordered way. These objects can be matrices, vectors, data frames, other lists, etc. 

What is its class?

```{r}
class(gapminder)
```
The `class()`function confirms that gapminder is a data frame. :+1:

How many variables/columns?
```{r}
ncol(gapminder)
```
How many rows/observations?
```{r}
nrow(gapminder)
```
`ncol()` and `nrow()` functions return the number of columns and rows, respectively.

Can you get these facts about “extent” or “size” in more than one way? Can you imagine different functions being useful in different contexts?

```{r}
dim(gapminder)
```
I can get the same information with `dim()` function, the output is (number of rows, number of columns). 

What data type is each variable?

```{r}
lapply(gapminder,class)
```

I can also get all the above information with `str()` function:

```{r}
str(gapminder)
```

## Explore individual variables

Here I explore the categorical variable `country` and the quantitative variable `lifeExp`.

### country

I would like to know how many countries are stored within `country`:

```{r}
n_distinct(gapminder$country)
```
Another way to do this is and to get all the unique values (all countries) is:

```{r}
unique(gapminder$country)
```

### lifeExp 

For the life expectancy variable I would like to know the range of the values first:

```{r}
range(gapminder$lifeExp)
```

The range, quartiles, median, and mean can all be obtained through `summary()`:
```{r}
summary(gapminder$lifeExp)
```

Know I want to look at the distribution of `lifeExp` by combining the histogram of the variable and a Kernel density plot.

```{r}
ggplot(gapminder, aes(lifeExp)) +
         geom_histogram(aes(y=..density..),fill = "cornflowerblue", bins=50) +
  geom_density()
```



## Explore various plot types

### A scatterplot of two quantitative variables

In this section I will explore gdpPercap as a function of lifeExp:

```{r}
  ggplot(gapminder, aes(lifeExp,gdpPercap, color=continent)) +
    geom_point(aes(alpha=year)) +
    scale_y_log10()
```

In the above graph I used transparency to differentiate the year of the data.
Now, I will just use the last year of data, which is 2007:

```{r}
a<-gapminder%>%
  filter(year == 2007)
a
```

```{r}
ggplot(a, aes(lifeExp,gdpPercap, color=continent)) +
    geom_point() +
    scale_y_log10()
```
This graph presents data from only one year. It is easily appreciated the difference overall between lifeExp and gdpPercap in African countries where it is lower than in Europe and Oceania.

### A plot of one quantitative variable.

Now, I will look at the lifeExp data arranged by continent with a frequency polygon:

```{r}
ggplot(gapminder, aes(lifeExp, color=continent)) +
  geom_freqpoly()
```

And now lets look at the distribution of this variable among continents.
```{r}
ggplot(gapminder, aes(lifeExp, fill=continent)) +
  geom_density(alpha=0.3)
```
...

```{r include = FALSE}
echo=FALSE
library(cowplot)
```


### A plot of one quantitative variable and one categorical.
```{r}
g1 <- ggplot(gapminder, aes(continent, pop, fill = continent)) +
    geom_boxplot() +
  scale_y_log10()
g2 <- ggplot(gapminder, aes(continent, lifeExp, fill = continent)) +
    geom_boxplot()
plot_grid(g1, g2)
```

```{r}
na <- gapminder %>%
  select(country, year, gdpPercap, lifeExp) %>%
  filter(country %in% c("Canada", "United States", "Mexico"))
na
na %>%
  ggplot(aes(x = year, y = lifeExp, group = year, color = country)) +
  facet_wrap(~country) +
  geom_boxplot()
```


